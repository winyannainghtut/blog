<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>AWS NAT using NAT instance | Khaw's Blog</title><meta name=keywords content><meta name=description content="AWS NAT using NAT instance ကျွန်တော်တို့ဟာ NAT GW ကိုမသုံးပဲနဲ့ EC2 Instance တစ်ခုကို NAT အနေနဲ့သုံးလို့ရပါသေးတယ်။ NAT GW ရဲ့ Cost ကို လျော့ချချင်တာပဲဖြစ်ဖြစ်၊ NAT အနောက်မှာ ရှိတဲ့ Inbound Outbound traffic တွေကို ကိုယ်တိုင် manage လုပ်ချင်တဲ့အခါမျိုးတွေ မှာအသုံးပြုလို့ရပါတယ်။ နောက်ပြီး NAT instance ကို Private host တွေရဲ့ Jump server or Bastion server အဖြစ်လည်းအသုံးပြုနိုင်ပါသေးတယ်။အားနည်းချက်အနေနဲ့ကတော့ AWS managed မဟုတ်တာကြောင့် administrator ကလိုချင်တဲ့ပုံစံကိုကိုယ်တိုင်ပြင်ယူရပါမယ်။
Setup: အရင်ဆုံးကျွန်တော် EC2 instance နှစ်ခုကို create လုပ်ပါမယ်။
ကျွန်တော်ကတော့ နှစ်ခုလုံးကို Ubuntu 20.04LTS ကိုပဲအသုံးပြုထားပါတယ်။ (မှတ်ချက်။ ။ကျွန်တော်ကတော့ IP tables rule ကို အသုံးပြုပြီး NAT လုပ်သွားမှာပါ။ တစ်ကယ်လို့ AWS NAT AMI ကိုအသုံးပြုပြီးတော့လုပ်တယ်ဆိုရင်လည်းအတူတူပါပဲ)"><meta name=author content="Win Yan Naing Htut"><link rel=canonical href=https://khawstech.com/posts/awsnatusingnatinstance/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.735c14aef5bd53538764fbe842da3b6b2041059e13045d88f457bc438e58e012.css integrity="sha256-c1wUrvW9U1OHZPvoQto7ayBBBZ4TBF2I9Fe8Q45Y4BI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: rgb(29, 30, 32);--entry: rgb(46, 46, 51);--primary: rgb(218, 218, 219);--secondary: rgb(155, 156, 157);--tertiary: rgb(65, 66, 68);--content: rgb(196, 196, 197);--hljs-bg: rgb(46, 46, 51);--code-bg: rgb(55, 56, 62);--border: rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-123-45','auto');ga('send','pageview');}</script><meta property="og:title" content="AWS NAT using NAT instance"><meta property="og:description" content="AWS NAT using NAT instance ကျွန်တော်တို့ဟာ NAT GW ကိုမသုံးပဲနဲ့ EC2 Instance တစ်ခုကို NAT အနေနဲ့သုံးလို့ရပါသေးတယ်။ NAT GW ရဲ့ Cost ကို လျော့ချချင်တာပဲဖြစ်ဖြစ်၊ NAT အနောက်မှာ ရှိတဲ့ Inbound Outbound traffic တွေကို ကိုယ်တိုင် manage လုပ်ချင်တဲ့အခါမျိုးတွေ မှာအသုံးပြုလို့ရပါတယ်။ နောက်ပြီး NAT instance ကို Private host တွေရဲ့ Jump server or Bastion server အဖြစ်လည်းအသုံးပြုနိုင်ပါသေးတယ်။အားနည်းချက်အနေနဲ့ကတော့ AWS managed မဟုတ်တာကြောင့် administrator ကလိုချင်တဲ့ပုံစံကိုကိုယ်တိုင်ပြင်ယူရပါမယ်။
Setup: အရင်ဆုံးကျွန်တော် EC2 instance နှစ်ခုကို create လုပ်ပါမယ်။
ကျွန်တော်ကတော့ နှစ်ခုလုံးကို Ubuntu 20.04LTS ကိုပဲအသုံးပြုထားပါတယ်။ (မှတ်ချက်။ ။ကျွန်တော်ကတော့ IP tables rule ကို အသုံးပြုပြီး NAT လုပ်သွားမှာပါ။ တစ်ကယ်လို့ AWS NAT AMI ကိုအသုံးပြုပြီးတော့လုပ်တယ်ဆိုရင်လည်းအတူတူပါပဲ)"><meta property="og:type" content="article"><meta property="og:url" content="https://khawstech.com/posts/awsnatusingnatinstance/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-11-02T17:34:23+08:00"><meta property="article:modified_time" content="2023-11-02T17:34:23+08:00"><meta property="og:site_name" content="Khaw's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="AWS NAT using NAT instance"><meta name=twitter:description content="AWS NAT using NAT instance ကျွန်တော်တို့ဟာ NAT GW ကိုမသုံးပဲနဲ့ EC2 Instance တစ်ခုကို NAT အနေနဲ့သုံးလို့ရပါသေးတယ်။ NAT GW ရဲ့ Cost ကို လျော့ချချင်တာပဲဖြစ်ဖြစ်၊ NAT အနောက်မှာ ရှိတဲ့ Inbound Outbound traffic တွေကို ကိုယ်တိုင် manage လုပ်ချင်တဲ့အခါမျိုးတွေ မှာအသုံးပြုလို့ရပါတယ်။ နောက်ပြီး NAT instance ကို Private host တွေရဲ့ Jump server or Bastion server အဖြစ်လည်းအသုံးပြုနိုင်ပါသေးတယ်။အားနည်းချက်အနေနဲ့ကတော့ AWS managed မဟုတ်တာကြောင့် administrator ကလိုချင်တဲ့ပုံစံကိုကိုယ်တိုင်ပြင်ယူရပါမယ်။
Setup: အရင်ဆုံးကျွန်တော် EC2 instance နှစ်ခုကို create လုပ်ပါမယ်။
ကျွန်တော်ကတော့ နှစ်ခုလုံးကို Ubuntu 20.04LTS ကိုပဲအသုံးပြုထားပါတယ်။ (မှတ်ချက်။ ။ကျွန်တော်ကတော့ IP tables rule ကို အသုံးပြုပြီး NAT လုပ်သွားမှာပါ။ တစ်ကယ်လို့ AWS NAT AMI ကိုအသုံးပြုပြီးတော့လုပ်တယ်ဆိုရင်လည်းအတူတူပါပဲ)"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"AWS NAT using NAT instance","item":"https://khawstech.com/posts/awsnatusingnatinstance/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"AWS NAT using NAT instance","name":"AWS NAT using NAT instance","description":"AWS NAT using NAT instance ကျွန်တော်တို့ဟာ NAT GW ကိုမသုံးပဲနဲ့ EC2 Instance တစ်ခုကို NAT အနေနဲ့သုံးလို့ရပါသေးတယ်။ NAT GW ရဲ့ Cost ကို လျော့ချချင်တာပဲဖြစ်ဖြစ်၊ NAT အနောက်မှာ ရှိတဲ့ Inbound Outbound traffic တွေကို ကိုယ်တိုင် manage လုပ်ချင်တဲ့အခါမျိုးတွေ မှာအသုံးပြုလို့ရပါတယ်။ နောက်ပြီး NAT instance ကို Private host တွေရဲ့ Jump server or Bastion server အဖြစ်လည်းအသုံးပြုနိုင်ပါသေးတယ်။အားနည်းချက်အနေနဲ့ကတော့ AWS managed မဟုတ်တာကြောင့် administrator ကလိုချင်တဲ့ပုံစံကိုကိုယ်တိုင်ပြင်ယူရပါမယ်။\nSetup: အရင်ဆုံးကျွန်တော် EC2 instance နှစ်ခုကို create လုပ်ပါမယ်။\nကျွန်တော်ကတော့ နှစ်ခုလုံးကို Ubuntu 20.04LTS ကိုပဲအသုံးပြုထားပါတယ်။ (မှတ်ချက်။ ။ကျွန်တော်ကတော့ IP tables rule ကို အသုံးပြုပြီး NAT လုပ်သွားမှာပါ။ တစ်ကယ်လို့ AWS NAT AMI ကိုအသုံးပြုပြီးတော့လုပ်တယ်ဆိုရင်လည်းအတူတူပါပဲ)","keywords":[],"articleBody":"AWS NAT using NAT instance ကျွန်တော်တို့ဟာ NAT GW ကိုမသုံးပဲနဲ့ EC2 Instance တစ်ခုကို NAT အနေနဲ့သုံးလို့ရပါသေးတယ်။ NAT GW ရဲ့ Cost ကို လျော့ချချင်တာပဲဖြစ်ဖြစ်၊ NAT အနောက်မှာ ရှိတဲ့ Inbound Outbound traffic တွေကို ကိုယ်တိုင် manage လုပ်ချင်တဲ့အခါမျိုးတွေ မှာအသုံးပြုလို့ရပါတယ်။ နောက်ပြီး NAT instance ကို Private host တွေရဲ့ Jump server or Bastion server အဖြစ်လည်းအသုံးပြုနိုင်ပါသေးတယ်။အားနည်းချက်အနေနဲ့ကတော့ AWS managed မဟုတ်တာကြောင့် administrator ကလိုချင်တဲ့ပုံစံကိုကိုယ်တိုင်ပြင်ယူရပါမယ်။\nSetup: အရင်ဆုံးကျွန်တော် EC2 instance နှစ်ခုကို create လုပ်ပါမယ်။\nကျွန်တော်ကတော့ နှစ်ခုလုံးကို Ubuntu 20.04LTS ကိုပဲအသုံးပြုထားပါတယ်။ (မှတ်ချက်။ ။ကျွန်တော်ကတော့ IP tables rule ကို အသုံးပြုပြီး NAT လုပ်သွားမှာပါ။ တစ်ကယ်လို့ AWS NAT AMI ကိုအသုံးပြုပြီးတော့လုပ်တယ်ဆိုရင်လည်းအတူတူပါပဲ)\nPublic EC2 instance\n Private IP - 10.0.1.144 Public IP - 54.255.19.40  Private EC2 instance\n Private IP - 10.0.1.159  Security Group configuration:\nPublic EC2 instance’s security group for example\nPrivate EC2 instance’s security group for example\nRouting Tables: Routing tables လေးတွေကိုလည်းတစ်ချက်ကြည့်လိုက်ရအောင်။\nPublic Subnet RT:\nPrivate Subnet RT:\nပုံမှန် NAT GW ကို point ရာကနေ NAT instance ကိုပြောင်း Point လုပ်ပေးလိုက်တဲ့သဘောပါပဲ။\nNAT Instance configuration: NAT instance မှာလိုအပ်တဲ့ configuration လေးတွေလုပ်ပါမယ်။\necho 1  /proc/sys/net/ipv4/ip_forward ကျွန်တော့်ရဲ့ NAT instance မှာ ifconfig ခေါ်ကြည့်လို့ရှိရင် အောက်ပါအတိုင်းမြင်ရမှာပါ။\nroot@ip-10-0-0-144:~# ifconfig eth0: flags=4163 mtu 9001 inet 10.0.0.144 netmask 255.255.255.0 broadcast 10.0.0.255 IP tables NAT rule လေးတစ်ခု apply လုပ်ပါမယ်။ အဲ့တာမှ Private subnet ထဲကလာတဲ့ traffic တွေဟာ အပြင်ကိုထွက်နိုင်မှာပါ။\niptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE Verifying: Host instance ကနေပြီးတော့ ကျွန်တော်တို့ Ping Request ၄ ခု ပို့ကြည့်ပါမယ်။\nNAT instance ပေါ်မှာ tcpdump ကိုအသုံးပြုပြီးတော့ တစ်ကယ် NAT လုပ်သွားလားဆိုတာကိုထပ်စစ်ကြည့်ပါမယ် ။\nအခုဆိုရင်ကျွန်တော်တို့ရဲ့ Private subnet ထဲက instance လေးက NAT instance ကိုအသုံးပြုပြီးတော့ internet ကိုဆက်သွယ်နိုင်ပါပြီ။ ဂရုပြုရမယ့် အချက်တွေရှိပါတယ် ။ Security groups မှာ NAT instance ရဲ့ inbound rules တွေကိုသေချာသက်မှတ်ပေးမှသာ Host instances တွေဟာ လိုအပ်တဲ့ service တွေကို အသုံးပြုနိုင်မှာဖြစ်ပါတယ်။\n:wq!\n","wordCount":"236","inLanguage":"en","datePublished":"2023-11-02T17:34:23+08:00","dateModified":"2023-11-02T17:34:23+08:00","author":{"@type":"Person","name":"Win Yan Naing Htut"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://khawstech.com/posts/awsnatusingnatinstance/"},"publisher":{"@type":"Organization","name":"Khaw's Blog","logo":{"@type":"ImageObject","url":"https://khawstech.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><header class=header><nav class=nav><div class=logo><a href=https://khawstech.com/ accesskey=h title="Home (Alt + H)"><img src=https://khawstech.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://khawstech.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://google.com title="Need to know something?"><span>Need to know something?</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>AWS NAT using NAT instance</h1><div class=post-meta><span title="2023-11-02 17:34:23 +0800 +08">November 2, 2023</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;236 words&nbsp;·&nbsp;Win Yan Naing Htut</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#setup>Setup:</a></li><li><a href=#routing-tables>Routing Tables:</a></li><li><a href=#nat-instance-configuration>NAT Instance configuration:</a></li><li><a href=#verifying>Verifying:</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h1 id=aws-nat-using-nat-instance>AWS NAT using NAT instance<a hidden class=anchor aria-hidden=true href=#aws-nat-using-nat-instance>#</a></h1><p><img loading=lazy src=/awsnat//NAT_using_NAT_instance.png alt="NAT using NAT instance.png"></p><p>ကျွန်တော်တို့ဟာ NAT GW ကိုမသုံးပဲနဲ့ EC2 Instance တစ်ခုကို NAT အနေနဲ့သုံးလို့ရပါသေးတယ်။
NAT GW ရဲ့ Cost ကို လျော့ချချင်တာပဲဖြစ်ဖြစ်၊ NAT အနောက်မှာ ရှိတဲ့ Inbound Outbound traffic တွေကို ကိုယ်တိုင် manage လုပ်ချင်တဲ့အခါမျိုးတွေ မှာအသုံးပြုလို့ရပါတယ်။ နောက်ပြီး NAT instance ကို Private host တွေရဲ့ Jump server or Bastion server အဖြစ်လည်းအသုံးပြုနိုင်ပါသေးတယ်။အားနည်းချက်အနေနဲ့ကတော့ AWS managed မဟုတ်တာကြောင့် administrator ကလိုချင်တဲ့ပုံစံကိုကိုယ်တိုင်ပြင်ယူရပါမယ်။</p><h3 id=setup>Setup:<a hidden class=anchor aria-hidden=true href=#setup>#</a></h3><p>အရင်ဆုံးကျွန်တော် EC2 instance နှစ်ခုကို create လုပ်ပါမယ်။</p><p>ကျွန်တော်ကတော့ နှစ်ခုလုံးကို Ubuntu 20.04LTS ကိုပဲအသုံးပြုထားပါတယ်။ (မှတ်ချက်။  ။ကျွန်တော်ကတော့ IP tables rule ကို အသုံးပြုပြီး NAT လုပ်သွားမှာပါ။ တစ်ကယ်လို့ AWS NAT AMI ကိုအသုံးပြုပြီးတော့လုပ်တယ်ဆိုရင်လည်းအတူတူပါပဲ)</p><p>Public EC2 instance</p><ol><li>Private IP - 10.0.1.144</li><li>Public IP - 54.255.19.40</li></ol><p>Private EC2 instance</p><ol><li>Private IP - 10.0.1.159</li></ol><p><strong>Security Group configuration:</strong></p><p>Public EC2 instance’s security group for example</p><p><img loading=lazy src=/awsnat//Untitled.png alt=Untitled></p><p>Private EC2 instance’s security group for example</p><p><img loading=lazy src=/awsnat//Untitled%201.png alt=Untitled></p><h3 id=routing-tables>Routing Tables:<a hidden class=anchor aria-hidden=true href=#routing-tables>#</a></h3><p>Routing tables လေးတွေကိုလည်းတစ်ချက်ကြည့်လိုက်ရအောင်။</p><p>Public Subnet RT:</p><p><img loading=lazy src=/awsnat//Untitled%202.png alt=Untitled></p><p>Private Subnet RT:</p><p><img loading=lazy src=/awsnat//Untitled%203.png alt=Untitled></p><p>ပုံမှန် NAT GW ကို point ရာကနေ NAT instance ကိုပြောင်း Point လုပ်ပေးလိုက်တဲ့သဘောပါပဲ။</p><h3 id=nat-instance-configuration>NAT Instance configuration:<a hidden class=anchor aria-hidden=true href=#nat-instance-configuration>#</a></h3><p>NAT instance မှာလိုအပ်တဲ့ configuration လေးတွေလုပ်ပါမယ်။</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash><span class=nb>echo</span> <span class=m>1</span> &gt; /proc/sys/net/ipv4/ip_forward
</code></pre></div><p>ကျွန်တော့်ရဲ့ NAT instance မှာ ifconfig ခေါ်ကြည့်လို့ရှိရင် အောက်ပါအတိုင်းမြင်ရမှာပါ။</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>root@ip-10-0-0-144:~# ifconfig 
eth0: <span class=nv>flags</span><span class=o>=</span>4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu <span class=m>9001</span>
        inet 10.0.0.144  netmask 255.255.255.0  broadcast 10.0.0.255
</code></pre></div><p>IP tables NAT rule လေးတစ်ခု apply လုပ်ပါမယ်။ အဲ့တာမှ Private subnet ထဲကလာတဲ့ traffic တွေဟာ အပြင်ကိုထွက်နိုင်မှာပါ။</p><div class=highlight><pre class=chroma><code class=language-bash data-lang=bash>iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
</code></pre></div><h3 id=verifying>Verifying:<a hidden class=anchor aria-hidden=true href=#verifying>#</a></h3><p>Host instance ကနေပြီးတော့ ကျွန်တော်တို့ Ping Request ၄ ခု ပို့ကြည့်ပါမယ်။</p><p><img loading=lazy src=/awsnat//Untitled%204.png alt=Untitled></p><p>NAT instance ပေါ်မှာ tcpdump ကိုအသုံးပြုပြီးတော့ တစ်ကယ် NAT လုပ်သွားလားဆိုတာကိုထပ်စစ်ကြည့်ပါမယ် ။</p><p><img loading=lazy src=/awsnat//Untitled%205.png alt=Untitled></p><p>အခုဆိုရင်ကျွန်တော်တို့ရဲ့ Private subnet ထဲက instance လေးက NAT instance ကိုအသုံးပြုပြီးတော့ internet ကိုဆက်သွယ်နိုင်ပါပြီ။ ဂရုပြုရမယ့် အချက်တွေရှိပါတယ် ။ <strong>Security groups မှာ NAT instance ရဲ့ inbound rules တွေကိုသေချာသက်မှတ်ပေးမှသာ Host instances တွေဟာ လိုအပ်တဲ့ service တွေကို အသုံးပြုနိုင်မှာဖြစ်ပါတယ်။</strong></p><p>:wq!</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://khawstech.com/posts/creating-rds+ec2-two-tier-architecture/><span class=title>Next »</span><br><span>Creating RDS+EC2 (Two Tier Architecture)</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share AWS NAT using NAT instance on twitter" href="https://twitter.com/intent/tweet/?text=AWS%20NAT%20using%20NAT%20instance&url=https%3a%2f%2fkhawstech.com%2fposts%2fawsnatusingnatinstance%2f&hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AWS NAT using NAT instance on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fkhawstech.com%2fposts%2fawsnatusingnatinstance%2f&title=AWS%20NAT%20using%20NAT%20instance&summary=AWS%20NAT%20using%20NAT%20instance&source=https%3a%2f%2fkhawstech.com%2fposts%2fawsnatusingnatinstance%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share AWS NAT using NAT instance on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fkhawstech.com%2fposts%2fawsnatusingnatinstance%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z" /></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://khawstech.com/>Khaw's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></a><script>let menu=document.getElementById('menu')
if(menu){menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script>document.querySelectorAll('pre > code').forEach((codeblock)=>{const container=codeblock.parentNode.parentNode;const copybutton=document.createElement('button');copybutton.classList.add('copy-code');copybutton.innerHTML='copy';function copyingDone(){copybutton.innerHTML='copied!';setTimeout(()=>{copybutton.innerHTML='copy';},2000);}
copybutton.addEventListener('click',(cb)=>{if('clipboard'in navigator){navigator.clipboard.writeText(codeblock.textContent);copyingDone();return;}
const range=document.createRange();range.selectNodeContents(codeblock);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);try{document.execCommand('copy');copyingDone();}catch(e){};selection.removeRange(range);});if(container.classList.contains("highlight")){container.appendChild(copybutton);}else if(container.parentNode.firstChild==container){}else if(codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"){codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);}else{codeblock.parentNode.appendChild(copybutton);}});</script></body></html>