<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Networking Services in AWS | Khaw's Blog</title><meta name=keywords content><meta name=description content="Big Picture of AWS Networking Services VPC ဆိုတာဘာလဲပေါ့ ?
Virtual private cloud လို့ခေါ်တဲ့ VPC ထဲမှာကျွန်တ်ောတို့ Networking နဲ့ပတ်သတ်တဲ့ AWS ရဲ့ services တွေကိုတစ်ချက် breakdown လုပ်ကြည့်လိုက်ရအောင်။
Subnets AWS ထဲမှာ ကျွန်တော်တို့က VPC တစ်ခုကို Create လုပ်လိုက်ပြီဆိုတာနဲ့ CIDR တစ်ခုကို သတ်မှတ်ပေးရမှာပါ။ အဲ့ဒီ CIDR ထဲကမှ Subnet တွေကို ပြန်ပြီး define လုပ်ပေးလို့ရပါတယ်။ ဥပမာ - 10.0.0.0/16 ဆိုတဲ့ CIDR range ထဲကနေပြီးတော့ 10.0.1.0/24 ဆိုတဲ့ Subnet ပြန်ခွဲလိုက်တာမျိုးပါ။ CIDR တွေကို ကြိုက်တဲ့ IP range ယူသုံးနိုင်ပါတယ်။ Public IP range တွေကို လဲ လိုအပ်ချက်အရယူသုံးလို့ရပေမယ့် နောက်ပိုင်း ပြဿနာအကြီးကြီးတတ်နိုင်တဲ့ အတွက် သတိပြုပြီးသုံးသင့်ပါတယ် ။ Private IP range ထဲက IP တွေကိုလဲ နောက်ပိုင်း VPC တွေတစ်ခုနဲ့တစ်ခုချိတ်ဆက်ဖို့ရှိတယ်ဆိုရင် မထပ်အောင်သုံးသင့်ပါတယ်။ နောက်ပြီးတော့ AWS မှာ reserved IP ဆိုတာရှိပါတယ်။ 10."><meta name=author content="Win Yan Naing Htut"><link rel=canonical href=https://khawstech.com/posts/networking-services-in-aws/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.735c14aef5bd53538764fbe842da3b6b2041059e13045d88f457bc438e58e012.css integrity="sha256-c1wUrvW9U1OHZPvoQto7ayBBBZ4TBF2I9Fe8Q45Y4BI=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad();></script><link rel=icon href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://khawstech.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme: rgb(29, 30, 32);--entry: rgb(46, 46, 51);--primary: rgb(218, 218, 219);--secondary: rgb(155, 156, 157);--tertiary: rgb(65, 66, 68);--content: rgb(196, 196, 197);--hljs-bg: rgb(46, 46, 51);--code-bg: rgb(55, 56, 62);--border: rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-123-45','auto');ga('send','pageview');}</script><meta property="og:title" content="Networking Services in AWS"><meta property="og:description" content="Big Picture of AWS Networking Services VPC ဆိုတာဘာလဲပေါ့ ?
Virtual private cloud လို့ခေါ်တဲ့ VPC ထဲမှာကျွန်တ်ောတို့ Networking နဲ့ပတ်သတ်တဲ့ AWS ရဲ့ services တွေကိုတစ်ချက် breakdown လုပ်ကြည့်လိုက်ရအောင်။
Subnets AWS ထဲမှာ ကျွန်တော်တို့က VPC တစ်ခုကို Create လုပ်လိုက်ပြီဆိုတာနဲ့ CIDR တစ်ခုကို သတ်မှတ်ပေးရမှာပါ။ အဲ့ဒီ CIDR ထဲကမှ Subnet တွေကို ပြန်ပြီး define လုပ်ပေးလို့ရပါတယ်။ ဥပမာ - 10.0.0.0/16 ဆိုတဲ့ CIDR range ထဲကနေပြီးတော့ 10.0.1.0/24 ဆိုတဲ့ Subnet ပြန်ခွဲလိုက်တာမျိုးပါ။ CIDR တွေကို ကြိုက်တဲ့ IP range ယူသုံးနိုင်ပါတယ်။ Public IP range တွေကို လဲ လိုအပ်ချက်အရယူသုံးလို့ရပေမယ့် နောက်ပိုင်း ပြဿနာအကြီးကြီးတတ်နိုင်တဲ့ အတွက် သတိပြုပြီးသုံးသင့်ပါတယ် ။ Private IP range ထဲက IP တွေကိုလဲ နောက်ပိုင်း VPC တွေတစ်ခုနဲ့တစ်ခုချိတ်ဆက်ဖို့ရှိတယ်ဆိုရင် မထပ်အောင်သုံးသင့်ပါတယ်။ နောက်ပြီးတော့ AWS မှာ reserved IP ဆိုတာရှိပါတယ်။ 10."><meta property="og:type" content="article"><meta property="og:url" content="https://khawstech.com/posts/networking-services-in-aws/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-10-19T00:00:00+00:00"><meta property="article:modified_time" content="2023-10-19T00:00:00+00:00"><meta property="og:site_name" content="Khaw's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Networking Services in AWS"><meta name=twitter:description content="Big Picture of AWS Networking Services VPC ဆိုတာဘာလဲပေါ့ ?
Virtual private cloud လို့ခေါ်တဲ့ VPC ထဲမှာကျွန်တ်ောတို့ Networking နဲ့ပတ်သတ်တဲ့ AWS ရဲ့ services တွေကိုတစ်ချက် breakdown လုပ်ကြည့်လိုက်ရအောင်။
Subnets AWS ထဲမှာ ကျွန်တော်တို့က VPC တစ်ခုကို Create လုပ်လိုက်ပြီဆိုတာနဲ့ CIDR တစ်ခုကို သတ်မှတ်ပေးရမှာပါ။ အဲ့ဒီ CIDR ထဲကမှ Subnet တွေကို ပြန်ပြီး define လုပ်ပေးလို့ရပါတယ်။ ဥပမာ - 10.0.0.0/16 ဆိုတဲ့ CIDR range ထဲကနေပြီးတော့ 10.0.1.0/24 ဆိုတဲ့ Subnet ပြန်ခွဲလိုက်တာမျိုးပါ။ CIDR တွေကို ကြိုက်တဲ့ IP range ယူသုံးနိုင်ပါတယ်။ Public IP range တွေကို လဲ လိုအပ်ချက်အရယူသုံးလို့ရပေမယ့် နောက်ပိုင်း ပြဿနာအကြီးကြီးတတ်နိုင်တဲ့ အတွက် သတိပြုပြီးသုံးသင့်ပါတယ် ။ Private IP range ထဲက IP တွေကိုလဲ နောက်ပိုင်း VPC တွေတစ်ခုနဲ့တစ်ခုချိတ်ဆက်ဖို့ရှိတယ်ဆိုရင် မထပ်အောင်သုံးသင့်ပါတယ်။ နောက်ပြီးတော့ AWS မှာ reserved IP ဆိုတာရှိပါတယ်။ 10."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Networking Services in AWS","item":"https://khawstech.com/posts/networking-services-in-aws/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Networking Services in AWS","name":"Networking Services in AWS","description":"Big Picture of AWS Networking Services VPC ဆိုတာဘာလဲပေါ့ ?\nVirtual private cloud လို့ခေါ်တဲ့ VPC ထဲမှာကျွန်တ်ောတို့ Networking နဲ့ပတ်သတ်တဲ့ AWS ရဲ့ services တွေကိုတစ်ချက် breakdown လုပ်ကြည့်လိုက်ရအောင်။\nSubnets AWS ထဲမှာ ကျွန်တော်တို့က VPC တစ်ခုကို Create လုပ်လိုက်ပြီဆိုတာနဲ့ CIDR တစ်ခုကို သတ်မှတ်ပေးရမှာပါ။ အဲ့ဒီ CIDR ထဲကမှ Subnet တွေကို ပြန်ပြီး define လုပ်ပေးလို့ရပါတယ်။ ဥပမာ - 10.0.0.0/16 ဆိုတဲ့ CIDR range ထဲကနေပြီးတော့ 10.0.1.0/24 ဆိုတဲ့ Subnet ပြန်ခွဲလိုက်တာမျိုးပါ။ CIDR တွေကို ကြိုက်တဲ့ IP range ယူသုံးနိုင်ပါတယ်။ Public IP range တွေကို လဲ လိုအပ်ချက်အရယူသုံးလို့ရပေမယ့် နောက်ပိုင်း ပြဿနာအကြီးကြီးတတ်နိုင်တဲ့ အတွက် သတိပြုပြီးသုံးသင့်ပါတယ် ။ Private IP range ထဲက IP တွေကိုလဲ နောက်ပိုင်း VPC တွေတစ်ခုနဲ့တစ်ခုချိတ်ဆက်ဖို့ရှိတယ်ဆိုရင် မထပ်အောင်သုံးသင့်ပါတယ်။ နောက်ပြီးတော့ AWS မှာ reserved IP ဆိုတာရှိပါတယ်။ 10.","keywords":[],"articleBody":"Big Picture of AWS Networking Services VPC ဆိုတာဘာလဲပေါ့ ?\nVirtual private cloud လို့ခေါ်တဲ့ VPC ထဲမှာကျွန်တ်ောတို့ Networking နဲ့ပတ်သတ်တဲ့ AWS ရဲ့ services တွေကိုတစ်ချက် breakdown လုပ်ကြည့်လိုက်ရအောင်။\nSubnets AWS ထဲမှာ ကျွန်တော်တို့က VPC တစ်ခုကို Create လုပ်လိုက်ပြီဆိုတာနဲ့ CIDR တစ်ခုကို သတ်မှတ်ပေးရမှာပါ။ အဲ့ဒီ CIDR ထဲကမှ Subnet တွေကို ပြန်ပြီး define လုပ်ပေးလို့ရပါတယ်။ ဥပမာ - 10.0.0.0/16 ဆိုတဲ့ CIDR range ထဲကနေပြီးတော့ 10.0.1.0/24 ဆိုတဲ့ Subnet ပြန်ခွဲလိုက်တာမျိုးပါ။ CIDR တွေကို ကြိုက်တဲ့ IP range ယူသုံးနိုင်ပါတယ်။ Public IP range တွေကို လဲ လိုအပ်ချက်အရယူသုံးလို့ရပေမယ့် နောက်ပိုင်း ပြဿနာအကြီးကြီးတတ်နိုင်တဲ့ အတွက် သတိပြုပြီးသုံးသင့်ပါတယ် ။ Private IP range ထဲက IP တွေကိုလဲ နောက်ပိုင်း VPC တွေတစ်ခုနဲ့တစ်ခုချိတ်ဆက်ဖို့ရှိတယ်ဆိုရင် မထပ်အောင်သုံးသင့်ပါတယ်။ နောက်ပြီးတော့ AWS မှာ reserved IP ဆိုတာရှိပါတယ်။ 10.0.0.0/24 ဆိုတဲ့ CIDR block မှာ စုစုပေါင်း IP 254 ခုအသုံးပြုလို့ရပေမယ့် AWS ရဲ့ VPC ထဲမှာ useable IP က စုစုပေါင်း 251 ခုပဲပြပါတယ်။ ဆိုတော့ကာ ဥပမာ usable IP တွက်ခိုင်းတာမျိုးဆိုရင် reserved IP တွေကိုပါဖယ်ပြီးတွက်ဖို့ သတိချက်သင်ပါတယ်။\nThe user want to use 14 IPs for it’s instances. Which CIDR range should he use ?\n10.0.0.0/28 or 10.0.0.0/27 ?\nAns : 10.0.0.0/27\nAWS subnetting မှာ Public Subnet နဲ့ Private Subnet ဆိုတဲ့အခေါ်အ‌ဝေါ် ကို Public IP range နဲ့ Private IP range နဲ့ အမှတ်မမှားဖို့သတိချက်ရပါမယ် ။ Subnet တစ်ခုရဲ့ route table ထဲမှာ Internet Gateway နဲ့ တွဲထားတာကို Public subnet လို့ခေါ်ပြီး Internet Gateway မရှိတဲ့ Subnet ကိုတော့ Private Subnet လို့ AWS networking မှာမှတ်ယူနိုင်ပါတယ်။\n 10.0.0.0: Network address. 10.0.0.1: Reserved by AWS for the VPC router. 10.0.0.2: Reserved by AWS. The IP address of the DNS server is the base of the VPC network range plus two. For VPCs with multiple CIDR blocks, the IP address of the DNS server is located in the primary CIDR. We also reserve the base of each subnet range plus two for all CIDR blocks in the VPC. For more information, see Amazon DNS server. 10.0.0.3: Reserved by AWS for future use. 10.0.0.255: Network broadcast address. We do not support broadcast in a VPC, therefore we reserve this address.  Ref : AWS subnet sizing\nRoute Table Route table ဆိုတာ လမ်းပြမြေပုံတစ်ခုပါပဲ ။ ဥပမာ - VPC ကိုမြို့တစ်ခုလို့ဆိုပါစို့ ၊ subnet တွေက တော့ အိမ်တွေအများကြီးပါတဲ့ block တွေပေါ့ ။အဲဒီ block တွေထဲမှာမှ End host IP or IP address လို့ခေါ်တဲ့ အိမ်တွေရှိတယ်ဆိုပါစို့။\nကျွန်တော်တို့ က IP တစ်ခုကို သွားချင်ရင် ဘယ်ကနေဘယ်လိုသွားရမယ်ဆိုတာ ကို ‌ပြောပြပေးတဲ့ မြေပုံကို route table လို့ခေါ်တာပါ။ Route table တစ်ခုမှာ Destination နဲ့ Gateway ဆိုပြီးရှိပါတယ် ။ ဘယ်ကို သွားချင်တာလဲ ? နဲ့ ဘယ်ကနေသွားရမလဲဆိုတာပါပဲ ။\n Example:\nVPC Information:\n VPC IP Address Range: 10.0.0.0/16  Subnet Information:\n   Subnet Name Subnet IP Address Range Purpose     Subnet A 10.0.1.0/24 Web Servers   Subnet B 10.0.2.0/24 Database Servers    Route Table for Subnet A:\n   Destination Target (Next Hop) Purpose     0.0.0.0/0 Internet Gateway ID Route internet-bound traffic through Internet Gateway   10.0.0.0/16 Local Keep local traffic within the VPC     For Subnet A, the route table allows all internet-bound traffic (0.0.0.0/0) to be directed through the Internet Gateway, effectively providing internet access. Local traffic within the VPC (10.0.0.0/16) is kept local.  Route Table for Subnet B:\n   Destination Target (Next Hop) Purpose     10.0.0.0/16 Local Keep local traffic within the VPC     For Subnet B, the route table only directs traffic within the VPC (10.0.0.0/16) to stay local and doesn’t route any traffic to the Internet Gateway. This subnet is isolated from the internet.   Internet Gateway ကျွန်တော်တို့ ရဲ့ VPC ထဲက services တွေကပြင်ပက Internet ကို access လုပ်ဖို့ လိုအပ် လာတဲ့အခါမျိုးမှာ ကျွန်တော် တို့က Internet gateway ကိုအသုံးပြုလို့ရပါတယ်။ Internet gateway ပြင်ပ public internet နဲ့ VPC ရဲ့ ဝင်ပေါက်ထွက်ပေါက်ပေါ့။ Internet gateway နဲ့ Public subnet တွေကို Route table ကတစ်ဆင့် ချိတ်ဆက်ပေးပါတယ်။ VPC တစ်ခုမှာ IGW တစ်ခုသာ attach လုပ်လို့ရပါတယ်။\nNAT Gateway NAT Gateway ကတော့ Private subnet ထဲက တစ်ချို့ services တွေအင်တာနက်ပေါ် ကိုထွက်ဖို့လိုလာတဲ့အခါမှာအသုံးပြုပါတယ်။ AWS မှာ NAT GW ကို Public NAT နဲ့ Private NAT ဆိုပြီးနှစ်မျိုးခွဲထားပါတယ်။ကျွန်တော်တို့ local network တွေမှာ သုံးတဲ့ NAT GW နဲ့ အတူတူပါပဲ။ private subnet တွေထဲက servers တွေ internet access ရချင်တဲ့အခါ NAT gateway ကို သုံးလို့ရပါတယ်။ Public NAT ကိုအသုံးပြုဖို့အတွက် Elastic IP ကိုမဖြစ်မနေလိုအပ်တယ်။\nWhen you assign an EIP to a public NAT gateway, the network border group of the EIP must match the network border group of the Availability Zone (AZ) that you’re launching the public NAT gateway into. If it’s not the same, the NAT gateway will fail to launch. You can see the network border group for the subnet’s AZ by viewing the details of the subnet. Similarly, you can view the network border group of an EIP by viewing the details of the EIP address. For more information about network border groups and EIPs, see Allocate an Elastic IP address.\nRef : AWS NAT Gateways\nGateway Endpoints AWS ထဲမှာPrivate subnet တွေကနေ internet ကို ဖြတ်စရာမလိုပဲ AWS services ကို ချိတ်ဆက်နိုင်ဖို့အတွက် gateway endpoints‌ တွေကို သုံးလို့ရပါတယ်။\n S3 Gateway DynamoDB Gateway  အားသာချက်ကတော့ Internet Gateway or NAT ‌gateway တွေကိုဖြတ်စရာမလိုပဲနဲ့ သက်ဆိုင်ရာ services တွေကို communicate လုပ်လို့ရမယ် ။ အဲ့ဒီတော့ NAT gateway လိုမျိုး fee တွေကို လျှော့ချလို့ရတယ်။\nVPC Peering ကျွန်တော်တို့ ရဲ့ VPC တွေကို အိမ်တစ်ခုအနေ နဲ့သာမြင်ခဲ့မယ်ဆိုရင် တစ်ခြား အိမ် (VPC) ကို Connect လုပ်ဖို့အတွက်လမ်းဖောက်ဖို့လိုပါတယ် ။ အဲ့ဒီလမ်း တွေကို VPC peering လို့ခေါ်ပါတယ် ။ မတူညီတဲ့ VPC နှစ်ခု ကိုချိတ်ဆက်ချင်တဲ့အခါမှာ VPC peering ကိုအသုံးပြုလို့ရပါတယ်။\nFormula to calculate the VPC peering : n(n-1)/2\nn = number of VPCs.\nTraffic between peered VPCs never traverses the public internet.\nTransit Gateway Transit Gateway ဆိုတာ AWS networking မှာတော့ တကယ့် အကောင်ပဲ။ ဥပမာ ကျွန်တော်တို့မှာ VPC နှစ်ခုပဲ ချိတ်ဆက်ဖို့လိုတယ်ဆိုရင် VPC peering ကိုအသုံးပြုလို့ရပါတယ် ။ ဒါပေမယ့် VPC အခု ၂၀ ၃၀ လောက်ချိတ်ဆက်ဖို့လိုလာပြီဆိုရင်ဘယ်လိုလုပ်မလဲ ? VPC တွေအကုန်လုံးကို Full-Mesh အနေနဲ့ချိတ်လို့ရတယ်ဆိုပေမယ့် n(n-1)/2 အရ peer တွေအများကြီးချိတ်ရမှာပါ။ အဲ့ဒီအတွက် Transit Gateway ဆိုတဲ့ ကောင်ပေါ်လာတာပါ။\nဒီအပြင် On-Prem Data center ကပါ VPC တွေနဲ့ ချိတ်ဆက်ချင်ရင် Transit gateway ကို လာချိတ်လို့ရပါသေးတယ်။ Transit Gateway ကိုသုံးလိုက်ခြင်းအားဖြင့် ကျွန်တော် တို့ရဲ့ Network topology ကိုပိုပြီး ရှင်းရှင်းလင်းလင်းဖြစ်စေတဲ့အပြင် Network Admin ကိုလဲ သက်သာစေပါတယ်။\nDirect Connect and Site-To-Site(VPN)  AWS Direct Connect ဆိုတာကျွန်တော်တို့ရဲ့ on-premise network နဲ့ AWS VPC တို့ကြားကတိုက်ရိုက်ဆက်သွယ်ပေးတဲ့ သီးသန့် မြန်နှုန်းမြင့် Connection တစ်ခုပါပဲ။ Direct Connect ကို အသုံးပြုမယ်ဆိုရင် public internet ကနေ ဖြတ်မသွားတဲ့ အတွက် ပိုမို လုံခြုံပြီးတော့ latency နည်းနည်းနဲ့ အမြန်နှုန်းကောင်းကောင်း အသုံးပြုနိုင်မှာပါ။ ကျွန်တော်တို့ရဲ့ on-premise network နဲ့ AWS ကို လုံလုံခြုံခြုံ ချိတ်ဆက်ချင်တယ် Direct connect link ဖိုးလည်း မတတ်နိုင်ဘူး ၊ မလိုဘူး ဆိုရင်တော့ Site-to-Site connection(VPN) ကို အသုံးပြုပြီး ချိတ်ဆက်လို့ ရပါတယ်။  Customer Gateway Customer Gateway ကို AWS site-to-site tunnel ထိုးတဲ့အခါမှာအသုံးပြုရပါတယ် ။ ဥပမာ - On-Prem မှာရှိတဲ့ On-Prem Firewall နဲ့ AWS VPC ကို IPsec tunnel အသုံးပြုပြီးတော့ Site-To-Site tunnel လုပ်ချင်တယ်ဆိုပါ‌စို့ ။ AWS ရဲ့ Console ထဲမှာ VGW (VPN Gateway) ကို Create လုပ်ရပါတယ်။ တစ်ခြားတစ်ဖက်က On-Prem Firewall ကို ကိုယ်စားပြု ပေးမယ့် Customer Gateway ကိုလဲထပ်ပြီး create လုပ်ပေးရပါတယ်။ Customer gateway မှာ On-Prem firewall ရဲ့ External IP (Public IP or NAT device ‌အနောက်မှာဆိုရင် NAT IP if NAT-traversal is being used) ကို ပြန် assign ထားပေးရပါတယ် ။ ဆိုလိုတာက VGW ကနေပြီးတော့ CGW မှာရှိတဲ့ Public IP ကိုသွားပြီးချိတ်ဆက်ချင်တာပါ။ အဲ့လိုVGW နဲ့ CGW အတွဲလေးရှိမှ On-prem ပေါ်မှာရှိတဲ့ Firewall ထဲမှာ ဘယ် IKE version ကိုအသုံးပြုပြီးတော့ Phase 1 tunnel လုပ်မယ် Phase 2 tunnel ကိုဘယ်လိုဆောက်မယ်ဆိုတဲ့ information တွေပါတဲ့ Configuration file ကို AWS console ထဲမှာ generate လုပ်လို့ရပါမယ်။ ပြီးရင် Local Firewall ပေါ် မှာလိုအပ်တဲ့ configuration တွေကိုထည့်ပေးရမှာပါ။\nRoute 53 DNS service တွေကို provide လုပ်ပေးတဲ့ AWS ရဲ့နာမည်ကြီး service ‌တစ်ခုဖြစ်ပါတယ် ။ DNS service တွေအပြင် Domain register ပါလုပ်လို့ရပါတယ်။\nCloud Front Content Delivery Network (CDN) ကို service ပေးတဲ့ AWS ရဲ့နောက်ထပ်နာမည်ကြီး service တစ်မျိုးပါပဲ။\nအလွယ်နည်းနဲ့ပြောရမယ်ဆိုရင် ကျွန်တော် တို့ရဲ့ Main server က US-EAST region မှာရှိနေပြီးတော့ client တွေက Asia Region ကနေ Access လုပ်ချင်တယ်ဆိုရင် Latency issue ကိုကြုံတွေ့ရမှာပါ။ အဲ့ဒီလိုမဖြစ်အောင် AWS က Asia Region ရဲ့ Edge Node တစ်ခုမှာ Cache လုပ်ပေးထားပြီးတော့ response time တွေကိုမြန်ဆန်စေပါတယ် ။ နောက်ကွယ်မှာတော့ High speed bandwidth နဲ့ AWS ရဲ့ Edge‌ တွေကိုချိတ်ဆက်ထားတာပါ။\nNACL and Security Groups NACL (Network Access Control Lists) ကို ကျွန်တော်တို့ Subnet level အတွက် Firewall လို့ပြောလို့ရပါတယ် ။ IP, Ports and protocol တွေကိုကြည့်ပြီးအဝင်အထွက်တွေကို Control လုပ်လို့ရပါတယ် ။ Stateless firewall ဖြစ်တဲ့အတွက် connection session တစ်ခုအတွက် inbound ရော outbound ရောကို သီးသန့်သတ်မှတ်ပေးရမှာပါ။\nSecurity Groups ကတော့ NACL နဲ့မတူပဲ Instance level firewall လို့ပြောလို့ရပါတယ် ။ Stateful firewall Firewall ဖြစ်တဲ့အလျှောက် Inbound ဖြစ်ဖြစ် Outbound ဖြစ်ဖြစ် session တစ်ခုကို allow\nပေးထားရင်ရပါပြီ။\n   Feature Network ACL Security Group     Layer Operates at subnet layer Operates at instance level   Rules Allow/deny rules based on IP protocol, port, and CIDR block Allow/deny rules based on IP protocol, port, and source/destination   Statefulness Stateless - Return traffic must be explicitly allowed Stateful - Return traffic is automatically allowed   AWS Resource Associations Automatically applied to all instances in the associated subnet Must be explicitly associated with instances   Rule Processing Order Processed before routing to/from instance Processed after routing to/from instance   Default Rules By default all inbound and outbound traffic is denied By default all inbound and outbound traffic is allowed   Allow/Deny Logic Applied in numbered order, last rule trumps conflicts Applied in any order, deny rules always trump allow   Public IP Access Must explicitly allow inbound traffic from 0.0.0.0/0 Implicitly allow inbound traffic from anywhere   Ideal Usage Filtering traffic in/out of subnets Filtering traffic in/out of specific instances    Elastic Load Balancing ဝင်လာတဲ့ Incoming traffic တွေကို ဘယ်ဟာကဘယ်ကိုသွားပါဆိုပြီး သတ်မှတ်ချင်လာတဲ့အခါမျိုးမှာ ELB ကိုအသုံးပြုကြတယ်။\nELB types :\n Application Load Balancer Network Load Balancer Gateway Load Balancer  Application Load Balancer ‌‌ဆိုတာကတော့ Layer 7 traffic တွေဖြစ်တဲ့ HTTP/HTTPS request တွေပေါ်မှာမူတည်ပြီးတော့ Load balance လုပ်ပေးတဲ့ Load balancer တစ်မျိုးဖြစ်ပါတယ်။\nNetwork Load Balancer ဆိုတာကတော့ Layer 3/4 Traffic တွေဖြစ်တဲ့ TCP/IP တွေပေါ် မှာမူတည်ပြီးတော့ Load Balance လုပ်ပေးတဲ့ Load Balancer မျိုးဖြစ်ပါတယ်။ NLB ဟာ AWS ရဲ့ Origin resource တွေဖြစ်တဲ့ EC2 instances , Containers ‌တွေစီကို လာတဲ့ Network Traffic တွေကို Load Balance လုပ်တာပါ။\nGateway Load Balancer နဲ့ NLB နှစ်ခုလုံးဟာ Network Layer မှာ အလုပ်လုပ် လုပ်ကြတာပါ။ မတူညီတဲ့အချက်ကတော့ GWLB က Traffic တွေကို Third party appliance ( Fortigate firewall from Marketplace, PaloAlto Firewall, IPS,IDS etc.) တွေကိုသုံးလာတဲ့အခါမျိုးမှာ route လုပ်ပေးဖို့အတွက်ရည်ရွယ်ပါတယ် ။ ဥပမာ - IPsec VPN , GRE tunnel traffics.\nFlow Logs AWS network troubleshooting အတွက်သုံးပါတယ်။ Traditional networking မှာ Troubleshooting အတွက် Debug တွေ လုပ်ကြသလိုပါပဲ ။ AWS flow logs ကိုအသုံးပြုပြီးတော့ Network Traffic နဲ့ဆိုင်တဲ့ Logs တွေကို capture လုပ်ထားလို့ရပါတယ် ။ Cloud watch နဲ့တွဲသုံးပြီးတော့ Monitoring လုပ်လို့ရသလို S3 buckets ‌ထဲမှာသိမ်းထားပြီးတော့ Athena လိုမျိုး Query tool နဲ့တွဲပြီး advance ကျကျ လဲ Logs တွေကို filter လုပ်ကြည့်လို့ရပါတယ်။ VPC flow log တွေကိုကြည့်ပြီးတော့ troubleshooting, monitoring တွေလုပ်လို့ရသလို network traffic patterns တွေကို ကြည့်ပြီးတေ့ကောင်းမွန်ပြီးလုံခြုံတဲ့ network ဖြစ်ဖို့တည်ဆောက်ရာမှာတော်တော်လေးအသုံးတည့်ပါတယ်။\n:wq!\n","wordCount":"1463","inLanguage":"en","datePublished":"2023-10-19T00:00:00Z","dateModified":"2023-10-19T00:00:00Z","author":{"@type":"Person","name":"Win Yan Naing Htut"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://khawstech.com/posts/networking-services-in-aws/"},"publisher":{"@type":"Organization","name":"Khaw's Blog","logo":{"@type":"ImageObject","url":"https://khawstech.com/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>if(localStorage.getItem("pref-theme")==="dark"){document.body.classList.add('dark');}else if(localStorage.getItem("pref-theme")==="light"){document.body.classList.remove('dark')}else if(window.matchMedia('(prefers-color-scheme: dark)').matches){document.body.classList.add('dark');}</script><header class=header><nav class=nav><div class=logo><a href=https://khawstech.com/ accesskey=h title="Home (Alt + H)"><img src=https://khawstech.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://khawstech.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://google.com title="Need to know something?"><span>Need to know something?</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Networking Services in AWS</h1><div class=post-meta><span title="2023-10-19 00:00:00 +0000 UTC">October 19, 2023</span>&nbsp;·&nbsp;7 min&nbsp;·&nbsp;1463 words&nbsp;·&nbsp;Win Yan Naing Htut</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><ul><li><a href=#big-picture-of-aws-networking-services><strong>Big Picture of AWS Networking Services</strong></a></li><li><a href=#subnets>Subnets</a></li><li><a href=#route-table>Route Table</a></li><li><a href=#internet-gateway>Internet Gateway</a></li><li><a href=#nat-gateway>NAT Gateway</a></li><li><a href=#gateway-endpoints>Gateway Endpoints</a></li><li><a href=#vpc-peering>VPC Peering</a></li><li><a href=#transit-gateway>Transit Gateway</a></li><li><a href=#direct-connect-and-site-to-sitevpn>Direct Connect and Site-To-Site(VPN)</a></li><li><a href=#customer-gateway>Customer Gateway</a></li><li><a href=#route-53>Route 53</a></li><li><a href=#cloud-front>Cloud Front</a></li><li><a href=#nacl-and-security-groups>NACL and Security Groups</a></li><li><a href=#elastic-load-balancing>Elastic Load Balancing</a></li><li><a href=#flow-logs>Flow Logs</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h3 id=big-picture-of-aws-networking-services><strong>Big Picture of AWS Networking Services</strong><a hidden class=anchor aria-hidden=true href=#big-picture-of-aws-networking-services>#</a></h3><p><img loading=lazy src=/awsnwsvc/AWS_networking_Services.jpg alt="AWS networking Services.jpg"></p><p>VPC ဆိုတာဘာလဲပေါ့ ?</p><p>Virtual private cloud လို့ခေါ်တဲ့ VPC ထဲမှာကျွန်တ်ောတို့ Networking နဲ့ပတ်သတ်တဲ့ AWS ရဲ့ services တွေကိုတစ်ချက် breakdown လုပ်ကြည့်လိုက်ရအောင်။</p><h3 id=subnets>Subnets<a hidden class=anchor aria-hidden=true href=#subnets>#</a></h3><p>AWS ထဲမှာ ကျွန်တော်တို့က VPC တစ်ခုကို Create လုပ်လိုက်ပြီဆိုတာနဲ့ CIDR တစ်ခုကို သတ်မှတ်ပေးရမှာပါ။ အဲ့ဒီ CIDR ထဲကမှ Subnet တွေကို ပြန်ပြီး define လုပ်ပေးလို့ရပါတယ်။ ဥပမာ - 10.0.0.0/16 ဆိုတဲ့ CIDR range ထဲကနေပြီးတော့ 10.0.1.0/24 ဆိုတဲ့ Subnet ပြန်ခွဲလိုက်တာမျိုးပါ။ CIDR တွေကို ကြိုက်တဲ့ IP range ယူသုံးနိုင်ပါတယ်။ Public IP range တွေကို လဲ လိုအပ်ချက်အရယူသုံးလို့ရပေမယ့် နောက်ပိုင်း ပြဿနာအကြီးကြီးတတ်နိုင်တဲ့ အတွက် သတိပြုပြီးသုံးသင့်ပါတယ် ။ <a href="https://www.ibm.com/docs/en/networkmanager/4.2.0?topic=translation-private-address-ranges">Private IP range</a> ထဲက IP တွေကိုလဲ နောက်ပိုင်း VPC တွေတစ်ခုနဲ့တစ်ခုချိတ်ဆက်ဖို့ရှိတယ်ဆိုရင် မထပ်အောင်သုံးသင့်ပါတယ်။ နောက်ပြီးတော့ AWS မှာ reserved IP ဆိုတာရှိပါတယ်။ 10.0.0.0/24 ဆိုတဲ့ CIDR block မှာ စုစုပေါင်း IP 254 ခုအသုံးပြုလို့ရပေမယ့် AWS ရဲ့ VPC ထဲမှာ useable IP က စုစုပေါင်း 251 ခုပဲပြပါတယ်။ ဆိုတော့ကာ ဥပမာ usable IP တွက်ခိုင်းတာမျိုးဆိုရင် reserved IP တွေကိုပါဖယ်ပြီးတွက်ဖို့ သတိချက်သင်ပါတယ်။</p><p>The user want to use 14 IPs for it’s instances. Which CIDR range should he use ?</p><p>10.0.0.0/28 or 10.0.0.0/27 ?</p><p>Ans : 10.0.0.0/27</p><p>AWS subnetting မှာ Public Subnet နဲ့ Private Subnet ဆိုတဲ့အခေါ်အ‌ဝေါ် ကို Public IP range နဲ့ Private IP range နဲ့ အမှတ်မမှားဖို့သတိချက်ရပါမယ် ။ Subnet တစ်ခုရဲ့ route table ထဲမှာ Internet Gateway နဲ့ တွဲထားတာကို Public subnet လို့ခေါ်ပြီး Internet Gateway မရှိတဲ့ Subnet ကိုတော့ Private Subnet လို့ AWS networking မှာမှတ်ယူနိုင်ပါတယ်။</p><ul><li>10.0.0.0: Network address.</li><li>10.0.0.1: Reserved by AWS for the VPC router.</li><li>10.0.0.2: Reserved by AWS. The IP address of the DNS server is the base of the VPC network range plus two. For VPCs with multiple CIDR blocks, the IP address of the DNS server is located in the primary CIDR. We also reserve the base of each subnet range plus two for all CIDR blocks in the VPC. For more information, see <a href=https://docs.aws.amazon.com/vpc/latest/userguide/vpc-dns.html#AmazonDNS>Amazon DNS server</a>.</li><li>10.0.0.3: Reserved by AWS for future use.</li><li>10.0.0.255: Network broadcast address. We do not support broadcast in a VPC, therefore we reserve this address.</li></ul><p>Ref : <a href=https://docs.aws.amazon.com/vpc/latest/userguide/subnet-sizing.html>AWS subnet sizing</a></p><h3 id=route-table>Route Table<a hidden class=anchor aria-hidden=true href=#route-table>#</a></h3><p>Route table ဆိုတာ လမ်းပြမြေပုံတစ်ခုပါပဲ ။ ဥပမာ - VPC ကိုမြို့တစ်ခုလို့ဆိုပါစို့ ၊ subnet တွေက တော့ အိမ်တွေအများကြီးပါတဲ့ block တွေပေါ့ ။အဲဒီ block တွေထဲမှာမှ End host IP or IP address လို့ခေါ်တဲ့ အိမ်တွေရှိတယ်ဆိုပါစို့။</p><p>ကျွန်တော်တို့ က IP တစ်ခုကို သွားချင်ရင် ဘယ်ကနေဘယ်လိုသွားရမယ်ဆိုတာ ကို ‌ပြောပြပေးတဲ့ မြေပုံကို route table လို့ခေါ်တာပါ။ Route table တစ်ခုမှာ Destination နဲ့ Gateway ဆိုပြီးရှိပါတယ် ။ ဘယ်ကို သွားချင်တာလဲ ? နဲ့ ဘယ်ကနေသွားရမလဲဆိုတာပါပဲ ။</p><blockquote><p>Example:</p><p><strong>VPC Information</strong>:</p><ul><li>VPC IP Address Range: 10.0.0.0/16</li></ul><p><strong>Subnet Information</strong>:</p><table><thead><tr><th>Subnet Name</th><th>Subnet IP Address Range</th><th>Purpose</th></tr></thead><tbody><tr><td>Subnet A</td><td>10.0.1.0/24</td><td>Web Servers</td></tr><tr><td>Subnet B</td><td>10.0.2.0/24</td><td>Database Servers</td></tr></tbody></table><p><strong>Route Table for Subnet A</strong>:</p><table><thead><tr><th>Destination</th><th>Target (Next Hop)</th><th>Purpose</th></tr></thead><tbody><tr><td>0.0.0.0/0</td><td>Internet Gateway ID</td><td>Route internet-bound traffic through Internet Gateway</td></tr><tr><td>10.0.0.0/16</td><td>Local</td><td>Keep local traffic within the VPC</td></tr></tbody></table><ul><li>For Subnet A, the route table allows all internet-bound traffic (0.0.0.0/0) to be directed through the Internet Gateway, effectively providing internet access. Local traffic within the VPC (10.0.0.0/16) is kept local.</li></ul><p><strong>Route Table for Subnet B</strong>:</p><table><thead><tr><th>Destination</th><th>Target (Next Hop)</th><th>Purpose</th></tr></thead><tbody><tr><td>10.0.0.0/16</td><td>Local</td><td>Keep local traffic within the VPC</td></tr></tbody></table><ul><li>For Subnet B, the route table only directs traffic within the VPC (10.0.0.0/16) to stay local and doesn&rsquo;t route any traffic to the Internet Gateway. This subnet is isolated from the internet.</li></ul></blockquote><h3 id=internet-gateway>Internet Gateway<a hidden class=anchor aria-hidden=true href=#internet-gateway>#</a></h3><p>ကျွန်တော်တို့ ရဲ့ VPC ထဲက services တွေကပြင်ပက Internet ကို access လုပ်ဖို့ လိုအပ် လာတဲ့အခါမျိုးမှာ ကျွန်တော် တို့က Internet gateway ကိုအသုံးပြုလို့ရပါတယ်။ Internet gateway ပြင်ပ public internet နဲ့ VPC ရဲ့ ဝင်ပေါက်ထွက်ပေါက်ပေါ့။ Internet gateway နဲ့ Public subnet တွေကို Route table ကတစ်ဆင့် ချိတ်ဆက်ပေးပါတယ်။ VPC တစ်ခုမှာ IGW တစ်ခုသာ attach လုပ်လို့ရပါတယ်။</p><p><img loading=lazy src=/awsnwsvc/Untitled.png alt=Untitled></p><h3 id=nat-gateway>NAT Gateway<a hidden class=anchor aria-hidden=true href=#nat-gateway>#</a></h3><p>NAT Gateway ကတော့ Private subnet ထဲက တစ်ချို့ services တွေအင်တာနက်ပေါ် ကိုထွက်ဖို့လိုလာတဲ့အခါမှာအသုံးပြုပါတယ်။ AWS မှာ NAT GW ကို Public NAT နဲ့ Private NAT ဆိုပြီးနှစ်မျိုးခွဲထားပါတယ်။ကျွန်တော်တို့ local network တွေမှာ သုံးတဲ့ NAT GW နဲ့ အတူတူပါပဲ။ private subnet တွေထဲက servers တွေ internet access ရချင်တဲ့အခါ NAT gateway ကို သုံးလို့ရပါတယ်။ Public NAT ကိုအသုံးပြုဖို့အတွက် Elastic IP ကိုမဖြစ်မနေလိုအပ်တယ်။</p><p>When you assign an EIP to a public NAT gateway, the network border group of the EIP must match the network border group of the Availability Zone (AZ) that you&rsquo;re launching the public NAT gateway into. If it&rsquo;s not the same, the NAT gateway will fail to launch. You can see the network border group for the subnet&rsquo;s AZ by viewing the details of the subnet. Similarly, you can view the network border group of an EIP by viewing the details of the EIP address. For more information about network border groups and EIPs, see <a href=https://docs.aws.amazon.com/vpc/latest/userguide/vpc-eips.html#allocate-eip>Allocate an Elastic IP address</a>.</p><p>Ref : <a href=https://docs.aws.amazon.com/vpc/latest/userguide/vpc-nat-gateway.html>AWS NAT Gateways</a></p><p><img loading=lazy src=/awsnwsvc/Untitled%201.png alt=Untitled></p><h3 id=gateway-endpoints>Gateway Endpoints<a hidden class=anchor aria-hidden=true href=#gateway-endpoints>#</a></h3><p>AWS ထဲမှာPrivate subnet တွေကနေ internet ကို ဖြတ်စရာမလိုပဲ AWS services ကို ချိတ်ဆက်နိုင်ဖို့အတွက် gateway endpoints‌ တွေကို သုံးလို့ရပါတယ်။</p><ol><li>S3 Gateway</li><li>DynamoDB Gateway</li></ol><p>အားသာချက်ကတော့ Internet Gateway or NAT ‌gateway တွေကိုဖြတ်စရာမလိုပဲနဲ့ သက်ဆိုင်ရာ services တွေကို communicate လုပ်လို့ရမယ် ။ အဲ့ဒီတော့ NAT gateway လိုမျိုး fee တွေကို လျှော့ချလို့ရတယ်။</p><h3 id=vpc-peering>VPC Peering<a hidden class=anchor aria-hidden=true href=#vpc-peering>#</a></h3><p>ကျွန်တော်တို့ ရဲ့ VPC တွေကို အိမ်တစ်ခုအနေ နဲ့သာမြင်ခဲ့မယ်ဆိုရင် တစ်ခြား အိမ် (VPC) ကို Connect လုပ်ဖို့အတွက်လမ်းဖောက်ဖို့လိုပါတယ် ။ အဲ့ဒီလမ်း တွေကို VPC peering လို့ခေါ်ပါတယ် ။ မတူညီတဲ့ VPC နှစ်ခု ကိုချိတ်ဆက်ချင်တဲ့အခါမှာ VPC peering ကိုအသုံးပြုလို့ရပါတယ်။</p><p>Formula to calculate the VPC peering : <strong>n(n-1)/2</strong></p><p>n = number of VPCs.</p><p><img loading=lazy src=/awsnwsvc/Untitled%202.png alt=Untitled></p><p><em><strong>Traffic between peered VPCs never traverses the public internet.</strong></em></p><h3 id=transit-gateway>Transit Gateway<a hidden class=anchor aria-hidden=true href=#transit-gateway>#</a></h3><p>Transit Gateway ဆိုတာ AWS networking မှာတော့ တကယ့် အကောင်ပဲ။ ဥပမာ ကျွန်တော်တို့မှာ VPC နှစ်ခုပဲ ချိတ်ဆက်ဖို့လိုတယ်ဆိုရင် VPC peering ကိုအသုံးပြုလို့ရပါတယ် ။ ဒါပေမယ့် VPC အခု ၂၀ ၃၀ လောက်ချိတ်ဆက်ဖို့လိုလာပြီဆိုရင်ဘယ်လိုလုပ်မလဲ ? VPC တွေအကုန်လုံးကို Full-Mesh အနေနဲ့ချိတ်လို့ရတယ်ဆိုပေမယ့် <strong><strong>n(n-1)/2</strong></strong> အရ peer တွေအများကြီးချိတ်ရမှာပါ။ အဲ့ဒီအတွက် Transit Gateway ဆိုတဲ့ ကောင်ပေါ်လာတာပါ။</p><p>ဒီအပြင် On-Prem Data center ကပါ VPC တွေနဲ့ ချိတ်ဆက်ချင်ရင် Transit gateway ကို လာချိတ်လို့ရပါသေးတယ်။ Transit Gateway ကိုသုံးလိုက်ခြင်းအားဖြင့် ကျွန်တော် တို့ရဲ့ Network topology ကိုပိုပြီး ရှင်းရှင်းလင်းလင်းဖြစ်စေတဲ့အပြင် Network Admin ကိုလဲ သက်သာစေပါတယ်။</p><p><img loading=lazy src=/awsnwsvc/Untitled%203.png alt=Untitled></p><h3 id=direct-connect-and-site-to-sitevpn>Direct Connect and Site-To-Site(VPN)<a hidden class=anchor aria-hidden=true href=#direct-connect-and-site-to-sitevpn>#</a></h3><ul><li>AWS Direct Connect ဆိုတာကျွန်တော်တို့ရဲ့ on-premise network နဲ့ AWS VPC တို့ကြားကတိုက်ရိုက်ဆက်သွယ်ပေးတဲ့ သီးသန့် မြန်နှုန်းမြင့် Connection တစ်ခုပါပဲ။ Direct Connect ကို အသုံးပြုမယ်ဆိုရင် public internet ကနေ ဖြတ်မသွားတဲ့ အတွက် ပိုမို လုံခြုံပြီးတော့ latency နည်းနည်းနဲ့ အမြန်နှုန်းကောင်းကောင်း အသုံးပြုနိုင်မှာပါ။</li><li>ကျွန်တော်တို့ရဲ့ on-premise network နဲ့ AWS ကို လုံလုံခြုံခြုံ ချိတ်ဆက်ချင်တယ် Direct connect link ဖိုးလည်း မတတ်နိုင်ဘူး ၊ မလိုဘူး ဆိုရင်တော့ Site-to-Site connection(VPN) ကို အသုံးပြုပြီး ချိတ်ဆက်လို့ ရပါတယ်။</li></ul><h3 id=customer-gateway>Customer Gateway<a hidden class=anchor aria-hidden=true href=#customer-gateway>#</a></h3><p>Customer Gateway ကို AWS site-to-site tunnel ထိုးတဲ့အခါမှာအသုံးပြုရပါတယ် ။ ဥပမာ - On-Prem မှာရှိတဲ့ On-Prem Firewall နဲ့ AWS VPC ကို IPsec tunnel အသုံးပြုပြီးတော့ Site-To-Site tunnel လုပ်ချင်တယ်ဆိုပါ‌စို့ ။ AWS ရဲ့ Console ထဲမှာ VGW (VPN Gateway) ကို Create လုပ်ရပါတယ်။ တစ်ခြားတစ်ဖက်က On-Prem Firewall ကို <strong>ကိုယ်စားပြု</strong> ပေးမယ့် Customer Gateway ကိုလဲထပ်ပြီး create လုပ်ပေးရပါတယ်။ Customer gateway မှာ On-Prem firewall ရဲ့ External IP (Public IP or NAT device ‌အနောက်မှာဆိုရင် NAT IP if NAT-traversal is being used) ကို ပြန် assign ထားပေးရပါတယ် ။ ဆိုလိုတာက VGW ကနေပြီးတော့ CGW မှာရှိတဲ့ Public IP ကိုသွားပြီးချိတ်ဆက်ချင်တာပါ။ အဲ့လိုVGW နဲ့ CGW အတွဲလေးရှိမှ On-prem ပေါ်မှာရှိတဲ့ Firewall ထဲမှာ ဘယ် IKE version ကိုအသုံးပြုပြီးတော့ Phase 1 tunnel လုပ်မယ် Phase 2 tunnel ကိုဘယ်လိုဆောက်မယ်ဆိုတဲ့ information တွေပါတဲ့ Configuration file ကို AWS console ထဲမှာ generate လုပ်လို့ရပါမယ်။ ပြီးရင် Local Firewall ပေါ် မှာလိုအပ်တဲ့ configuration တွေကိုထည့်ပေးရမှာပါ။</p><p><img loading=lazy src=/awsnwsvc/Untitled%204.png alt=Untitled></p><h3 id=route-53>Route 53<a hidden class=anchor aria-hidden=true href=#route-53>#</a></h3><p>DNS service တွေကို provide လုပ်ပေးတဲ့ AWS ရဲ့နာမည်ကြီး service ‌တစ်ခုဖြစ်ပါတယ် ။ DNS service တွေအပြင် Domain register ပါလုပ်လို့ရပါတယ်။</p><p><img loading=lazy src=/awsnwsvc/Untitled%205.png alt=Untitled></p><p><img loading=lazy src=/awsnwsvc/Untitled%206.png alt=Untitled></p><h3 id=cloud-front>Cloud Front<a hidden class=anchor aria-hidden=true href=#cloud-front>#</a></h3><p>Content Delivery Network (CDN) ကို service ပေးတဲ့ AWS ရဲ့နောက်ထပ်နာမည်ကြီး service တစ်မျိုးပါပဲ။</p><p>အလွယ်နည်းနဲ့ပြောရမယ်ဆိုရင် ကျွန်တော် တို့ရဲ့ Main server က US-EAST region မှာရှိနေပြီးတော့ client တွေက Asia Region ကနေ Access လုပ်ချင်တယ်ဆိုရင် <a href=https://www.cloudflare.com/learning/performance/glossary/what-is-latency/>Latency issue</a> ကိုကြုံတွေ့ရမှာပါ။ အဲ့ဒီလိုမဖြစ်အောင် AWS က Asia Region ရဲ့ Edge Node တစ်ခုမှာ Cache လုပ်ပေးထားပြီးတော့ response time တွေကိုမြန်ဆန်စေပါတယ် ။ နောက်ကွယ်မှာတော့ High speed bandwidth နဲ့ AWS ရဲ့ Edge‌ တွေကိုချိတ်ဆက်ထားတာပါ။</p><p><img loading=lazy src=/awsnwsvc/Untitled%207.png alt=Untitled></p><h3 id=nacl-and-security-groups>NACL and Security Groups<a hidden class=anchor aria-hidden=true href=#nacl-and-security-groups>#</a></h3><p>NACL (Network Access Control Lists) ကို ကျွန်တော်တို့ Subnet level အတွက် Firewall လို့ပြောလို့ရပါတယ် ။ IP, Ports and protocol တွေကိုကြည့်ပြီးအဝင်အထွက်တွေကို Control လုပ်လို့ရပါတယ် ။ Stateless firewall ဖြစ်တဲ့အတွက် connection session တစ်ခုအတွက် inbound ရော outbound ရောကို သီးသန့်သတ်မှတ်ပေးရမှာပါ။</p><p>Security Groups ကတော့ NACL နဲ့မတူပဲ Instance level firewall လို့ပြောလို့ရပါတယ် ။ Stateful firewall Firewall ဖြစ်တဲ့အလျှောက် Inbound ဖြစ်ဖြစ် Outbound ဖြစ်ဖြစ် session တစ်ခုကို allow</p><p>ပေးထားရင်ရပါပြီ။</p><table><thead><tr><th>Feature</th><th>Network ACL</th><th>Security Group</th></tr></thead><tbody><tr><td>Layer</td><td>Operates at subnet layer</td><td>Operates at instance level</td></tr><tr><td>Rules</td><td>Allow/deny rules based on IP protocol, port, and CIDR block</td><td>Allow/deny rules based on IP protocol, port, and source/destination</td></tr><tr><td>Statefulness</td><td>Stateless - Return traffic must be explicitly allowed</td><td>Stateful - Return traffic is automatically allowed</td></tr><tr><td>AWS Resource Associations</td><td>Automatically applied to all instances in the associated subnet</td><td>Must be explicitly associated with instances</td></tr><tr><td>Rule Processing Order</td><td>Processed before routing to/from instance</td><td>Processed after routing to/from instance</td></tr><tr><td>Default Rules</td><td>By default all inbound and outbound traffic is denied</td><td>By default all inbound and outbound traffic is allowed</td></tr><tr><td>Allow/Deny Logic</td><td>Applied in numbered order, last rule trumps conflicts</td><td>Applied in any order, deny rules always trump allow</td></tr><tr><td>Public IP Access</td><td>Must explicitly allow inbound traffic from 0.0.0.0/0</td><td>Implicitly allow inbound traffic from anywhere</td></tr><tr><td>Ideal Usage</td><td>Filtering traffic in/out of subnets</td><td>Filtering traffic in/out of specific instances</td></tr></tbody></table><h3 id=elastic-load-balancing>Elastic Load Balancing<a hidden class=anchor aria-hidden=true href=#elastic-load-balancing>#</a></h3><p>ဝင်လာတဲ့ Incoming traffic တွေကို ဘယ်ဟာကဘယ်ကိုသွားပါဆိုပြီး သတ်မှတ်ချင်လာတဲ့အခါမျိုးမှာ ELB ကိုအသုံးပြုကြတယ်။</p><p>ELB types :</p><ol><li>Application Load Balancer</li><li>Network Load Balancer</li><li>Gateway Load Balancer</li></ol><p><strong><strong><strong><strong><strong><strong>Application Load Balancer ‌</strong></strong></strong></strong></strong></strong>‌ဆိုတာကတော့ Layer 7 traffic တွေဖြစ်တဲ့ HTTP/HTTPS request တွေပေါ်မှာမူတည်ပြီးတော့ Load balance လုပ်ပေးတဲ့ Load balancer တစ်မျိုးဖြစ်ပါတယ်။</p><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Network Load Balancer</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong> ဆိုတာကတော့ Layer 3/4 Traffic တွေဖြစ်တဲ့ TCP/IP တွေပေါ် မှာမူတည်ပြီးတော့ Load Balance လုပ်ပေးတဲ့ Load Balancer မျိုးဖြစ်ပါတယ်။ NLB ဟာ AWS ရဲ့ Origin resource တွေဖြစ်တဲ့ EC2 instances , Containers ‌တွေစီကို လာတဲ့ Network Traffic တွေကို Load Balance လုပ်တာပါ။</p><p><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>Gateway Load Balancer</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong> နဲ့ NLB နှစ်ခုလုံးဟာ Network Layer မှာ အလုပ်လုပ် လုပ်ကြတာပါ။ မတူညီတဲ့အချက်ကတော့ GWLB က Traffic တွေကို Third party appliance ( Fortigate firewall from Marketplace, PaloAlto Firewall, IPS,IDS etc.) တွေကိုသုံးလာတဲ့အခါမျိုးမှာ route လုပ်ပေးဖို့အတွက်ရည်ရွယ်ပါတယ် ။ ဥပမာ - IPsec VPN , GRE tunnel traffics.</p><h3 id=flow-logs>Flow Logs<a hidden class=anchor aria-hidden=true href=#flow-logs>#</a></h3><p>AWS network troubleshooting အတွက်သုံးပါတယ်။ Traditional networking မှာ Troubleshooting အတွက် Debug တွေ လုပ်ကြသလိုပါပဲ ။ AWS flow logs ကိုအသုံးပြုပြီးတော့ Network Traffic နဲ့ဆိုင်တဲ့ Logs တွေကို capture လုပ်ထားလို့ရပါတယ် ။ Cloud watch နဲ့တွဲသုံးပြီးတော့ Monitoring လုပ်လို့ရသလို S3 buckets ‌ထဲမှာသိမ်းထားပြီးတော့ Athena လိုမျိုး Query tool နဲ့တွဲပြီး advance ကျကျ လဲ Logs တွေကို filter လုပ်ကြည့်လို့ရပါတယ်။ VPC flow log တွေကိုကြည့်ပြီးတော့ troubleshooting, monitoring တွေလုပ်လို့ရသလို network traffic patterns တွေကို ကြည့်ပြီးတေ့ကောင်းမွန်ပြီးလုံခြုံတဲ့ network ဖြစ်ဖို့တည်ဆောက်ရာမှာတော်တော်လေးအသုံးတည့်ပါတယ်။</p><p>:wq!</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://khawstech.com/posts/vpcwithcfn/><span class=title>« Prev</span><br><span>VPC Creation with CFN</span></a></nav><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share Networking Services in AWS on twitter" href="https://twitter.com/intent/tweet/?text=Networking%20Services%20in%20AWS&url=https%3a%2f%2fkhawstech.com%2fposts%2fnetworking-services-in-aws%2f&hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zm-253.927 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Networking Services in AWS on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2fkhawstech.com%2fposts%2fnetworking-services-in-aws%2f&title=Networking%20Services%20in%20AWS&summary=Networking%20Services%20in%20AWS&source=https%3a%2f%2fkhawstech.com%2fposts%2fnetworking-services-in-aws%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512h-386.892c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0v-129.439c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02v-126.056c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768h75.024zm-307.552-334.556c-25.674.0-42.448 16.879-42.448 39.002.0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z" /></svg></a><a target=_blank rel="noopener noreferrer" aria-label="share Networking Services in AWS on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fkhawstech.com%2fposts%2fnetworking-services-in-aws%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978v-192.915h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554v-386.892c0-34.524 28.029-62.554 62.554-62.554h386.892z" /></svg></a></div></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://khawstech.com/>Khaw's Blog</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z" /></svg></a><script>let menu=document.getElementById('menu')
if(menu){menu.scrollLeft=localStorage.getItem("menu-scroll-position");menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft);}}
document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){e.preventDefault();var id=this.getAttribute("href").substr(1);if(!window.matchMedia('(prefers-reduced-motion: reduce)').matches){document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({behavior:"smooth"});}else{document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();}
if(id==="top"){history.replaceState(null,null," ");}else{history.pushState(null,null,`#${id}`);}});});</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){if(document.body.scrollTop>800||document.documentElement.scrollTop>800){mybutton.style.visibility="visible";mybutton.style.opacity="1";}else{mybutton.style.visibility="hidden";mybutton.style.opacity="0";}};</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{if(document.body.className.includes("dark")){document.body.classList.remove('dark');localStorage.setItem("pref-theme",'light');}else{document.body.classList.add('dark');localStorage.setItem("pref-theme",'dark');}})</script><script>document.querySelectorAll('pre > code').forEach((codeblock)=>{const container=codeblock.parentNode.parentNode;const copybutton=document.createElement('button');copybutton.classList.add('copy-code');copybutton.innerHTML='copy';function copyingDone(){copybutton.innerHTML='copied!';setTimeout(()=>{copybutton.innerHTML='copy';},2000);}
copybutton.addEventListener('click',(cb)=>{if('clipboard'in navigator){navigator.clipboard.writeText(codeblock.textContent);copyingDone();return;}
const range=document.createRange();range.selectNodeContents(codeblock);const selection=window.getSelection();selection.removeAllRanges();selection.addRange(range);try{document.execCommand('copy');copyingDone();}catch(e){};selection.removeRange(range);});if(container.classList.contains("highlight")){container.appendChild(copybutton);}else if(container.parentNode.firstChild==container){}else if(codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"){codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);}else{codeblock.parentNode.appendChild(copybutton);}});</script></body></html>